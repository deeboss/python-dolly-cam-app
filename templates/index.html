<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dolly Remote</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/reset.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <script type=text/javascript src="{{url_for('static', filename='js/jquery.js') }}"></script>
  </head>
  <body>
    <!-- <nav class="other-controls">
      <div class="icon-row">
        <img class="icon settings" src="{{ url_for('static', filename='img/icon-settings.svg') }}"/>
      </div>
    </nav> -->
    <div class='wrapper'>
      <h1> Dolly Remote </h1>
    </div>
    <footer class="camera-controls">
      <ul class="flex align-center justify-content-center">
        <li>
          <div class="icon-row" style="visibility: hidden">
            <img class="icon settings" src="{{url_for('static', filename='img/icon-settings.svg') }}">
          </div>
        </li>
        <li class="camera-controls--center-button">
          <button class="button--capture-image" id="captureImage">
            <span></span>
          </button>
        </li>
        <li>
          <div class="icon-row">
            <img id="openSettings" class="icon settings" src="{{ url_for('static', filename='img/icon-settings.svg') }}"/>
          </div>
        </li>
      </ul>
    </footer>
    <div class="drawer">
      <ul class="drawer-list">
        <li>
          <div class="list-title">Others</div>
          <div class="list-options">
            <div class="flex justify-content-center align-center" id="blinkLed">
              <!-- <img class="icon blink" src="{{url_for('static', filename='img/icon-led_blink.svg') }}"> -->
              <span>Test connection to device</span>
            </div>
          </div>
        </li>
      </ul>
    </div>
    <script type="text/javascript">
      var configsData = JSON.parse('{{ data | tojson | safe}}');

        var target = $('.drawer-list');

        for (var i = configsData.length - 1; i >= 0; i--) {
          var configId = configsData[i].id;
          var optionName = configsData[i].Label;
          var optionsDiv = $('<div class="flex">');

          if (configsData[i].Choice) {
            target.prepend(
              $('<li>')
              .append(
                $('<div class="list-title">')
                  .append(
                    optionName
                  )
              )
              .append(
                  $('<div class="list-options">')
                    .append(
                      optionsDiv
                    )
              )
            )

            
            for (var j = 0; j < configsData[i].Choice.length; j++) {
              var optionsName = configsData[i].Choice[j]

              if (configsData[i].Choice.length > 10) {
                optionsDiv.addClass("options--x-scroll-view");
              } else if (configsData[i].Choice.length < 4) {
                optionsDiv.addClass("options--centered-view");
              } else {
                optionsDiv.addClass("options--list-view");
              }
              

              optionsDiv.append($('<div>')
                .append(
                  $('<input type="radio">').attr({
                    id: configId + j
                  })
                )
                .append(
                  $('<label>').attr({
                    for: configId + j
                  })
                    .append(
                      optionsName
                    )
                )
              )
            }
          }
          
          
        }


        // var configItem = `
        //   <li>
        //     <div class="list-title">${name}</div>
        //     <div class="list-options">
        //       <div class="flex justify-content-start">
        //         <div>
        //           <input id="${id}${optionIdx}" name="${id}" type="radio">
        //           <label for="${id}${optionIdx}">${optionName}</label>
        //         </div>
        //       </div>
        //     </div>
        //   </li>
        // `
    </script>
    <script type=text/javascript src="{{url_for('static', filename='js/app.js') }}"></script>
  </body>
</html>
